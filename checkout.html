<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout - S.N.A Cosmetics</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">

  <!-- üå∏ FAVICON -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/logo-sna.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/logo-sna.png">
  <link rel="apple-touch-icon" href="images/logo-sna.png">
  <!-- pastikan file logo-sna.png disimpan di folder "images" -->
   
  <style>
    body {
      font-family: 'Open Sans', sans-serif;
      background-color: #fff5f7;
      margin: 0;
      padding: 100px 60px;
    }
    h1 {
      font-family: 'Playfair Display', serif;
      color: #a10032;
      text-align: center;
      margin-top: 10px;
    }

    .back-home {
      position: absolute;
      top: 30px;
      left: 40px;
      background: #a10032;
      color: white;
      padding: 8px 14px;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 600;
      font-size: 14px;
      transition: 0.3s;
    }
    .back-home:hover { background:#740024; }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 35px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    th, td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid #eee;
    }
    th {
      background-color: #f4efe9;
      color: #a10032;
    }

    .center { text-align:center; margin-top:20px; }

    .btn {
      background: #a10032;
      color: white;
      padding: 12px 24px;
      margin-top: 12px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      display: block;
      width: 260px;
      margin-left: auto;
      margin-right: auto;
    }
    .btn:hover { background:#740024; }

    select {
      padding: 10px;
      border-radius: 6px;
      width: 260px;
      margin-top:5px;
    }
  </style>
</head>
<body>

<a href="index.html" class="back-home">‚¨ÖÔ∏è Kembali ke Beranda</a>
<h1>CHECKOUT</h1>

<div id="checkout-items"></div>

<div class="center" id="payment-section" style="display:none;">
  <h3 style="color:#a10032;">Pilih Metode Pembayaran</h3>
  <select id="payment-method">
    <option value="transfer">Transfer Bank (BCA/BNI/Mandiri)</option>
    <option value="ewallet">E-Wallet (OVO / Dana / Gopay)</option>
    <option value="cod">COD (Bayar di Tempat)</option>
  </select>

  <button id="pay-btn" class="btn">Konfirmasi Pembayaran via WhatsApp</button>
  <button id="clear-cart" class="btn" style="background:#555;">Hapus Keranjang</button>
</div>

<script>
const cart = JSON.parse(localStorage.getItem('cart')) || [];
const checkoutDiv = document.getElementById('checkout-items');
const paymentSection = document.getElementById('payment-section');

if (cart.length === 0) {
  checkoutDiv.innerHTML = `<p style="text-align:center;">Keranjang Anda kosong.</p>`;
} else {
  let total = 0;
  let html = `
  <table>
  <thead>
    <tr>
      <th>Produk</th><th>Jumlah</th><th>Harga</th><th>Subtotal</th>
    </tr>
  </thead><tbody>` ;

  cart.forEach(item => {
    const subtotal = item.price * item.qty;
    total += subtotal;
    html += `
    <tr>
      <td>${item.name}</td>
      <td>${item.qty}</td>
      <td>Rp${item.price.toLocaleString()}</td>
      <td>Rp${subtotal.toLocaleString()}</td>
    </tr>`;
  });

  html += `</tbody></table>
  <h3 style="text-align:right;color:#a10032;margin-top:20px">Total: Rp${total.toLocaleString()}</h3>

  <button id="continue-pay" class="btn">Lanjutkan Pembayaran</button>
  `;
  checkoutDiv.innerHTML = html;
}

document.addEventListener("click", (e)=>{
  if(e.target.id==="continue-pay") paymentSection.style.display="block";
});

document.getElementById('clear-cart').addEventListener('click',()=>{
  localStorage.removeItem('cart'); location.reload();
});

document.getElementById('pay-btn').addEventListener('click', () => {
  const paymentMethod = document.getElementById('payment-method').value;
  let methodText = paymentMethod==="transfer" ? "Transfer Bank" :
                   paymentMethod==="ewallet" ? "E-Wallet" : "COD (Bayar di Tempat)";

  const total = cart.reduce((s,i)=> s+(i.price*i.qty),0);

  const message = `Halo Admin! Saya ingin konfirmasi pesanan.%0A
Metode Pembayaran: ${methodText}%0A
Total: Rp${total.toLocaleString()}%0A
Pesanan:%0A${cart.map(i=>`- ${i.name} (${i.qty}x)`).join("%0A")}
%0A Mohon diproses ya üòä`;

  window.location.href = `https://wa.me/6285775582082?text=${message}`;
  localStorage.removeItem('cart');
});
</script>

</body>
</html>